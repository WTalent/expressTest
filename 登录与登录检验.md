# 登录与登录的校验

1. 什么是登录校验
    -  我们项目中有些页面，必须是在有登录状态的情况下，才允许你访问，如果没有登录，首先让你去登录一下

2. 如何判断用户是否登录了呢？
    -  第一种方法，利用cookie（用户登录成功，给浏览器写一个cookie，后续判断cookie是否存在，存在即有登录状态，不存在则说明用户没有登录）
      
     但是这种方法是不够安全的，因为cookie可以在前端进行伪造 
    -  第二种方法，利用session(如同浏览器的cookie)
       - 操作流程
         1. 用户登录成功，服务器保存一个session，session是可以通过sessionId来获取到

            session的结构如下
            ```bash
             {
              sessionId:value,
              sessionId:value
             }
            ```
         2. 将sessionId作为cookie写到浏览器中去
         3. 基于cookie的特性(cookie在每次提交中，都会被包含在请求头中)
         4. 后台拿到这个cookie，其实这个cookie就是sessionId
         5. 在根据这个sessionId就可以获取到session的内容
         6. 根据session的内容来坐判断用户是否登录

3. 如何使用session
   - 在项目中安装
    ```bash
      npm install --save express-session
    ```
   - 调用这个session 中间件
    ```js
      app.use(session({
          sercet:'sadadasdaa',//cookie的签名
          resave:true, //是否在对session有更新操作的时候，重新给浏览器更新session
          savvUnit...:true, //是否默认初始化session
          cookie:{
             maxAge:10,//cookie有效期
             
          }
      }))
    ```
4. session中间件，就给req加了个session属性(session也是个对象)